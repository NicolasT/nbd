<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Nbd : A Haskell library to implement Network Block Device servers" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Nbd</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/NicolasT/nbd">View on GitHub</a>

          <h1 id="project_title">Nbd</h1>
          <h2 id="project_tagline">A Haskell library to implement Network Block Device servers</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<p>'<a href="https://github.com/NicolasT/nbd">nbd</a>' is a <a href="http://www.haskell.org">Haskell</a> library to implement <a href="http://en.wikipedia.org/wiki/Network_block_device">NBD</a> (Network Block Device) servers.
This can be used to implement block-devices in userspace using the Haskell
programming language, using the <a href="http://hackage.haskell.org/package/conduit">Conduit</a> library.</p>

<h2>Demo</h2>

<p>A very simple demonstration server is included in this repository, see
<em>bin/server.hs</em>. The server can export multiple files (all as a different
device), and currently only supports read-only access.</p>

<p>To test, build the library and binary using <a href="http://www.haskell.org/cabal/">cabal</a>, then run something like:</p>

<pre><code>$ dd if=/dev/urandom of=blocks bs=1024 count=65536
$ md5sum blocks 
7604d00d72b9b8f8cb10e709a1ac3075  blocks
$ ./dist/build/nbd-demo-server/nbd-demo-server blocks
</code></pre>

<p>Now in another shell, as root:</p>

<pre><code># modprobe nbd
# # Connect to the server, creating /dev/nbd0
# nbd-client localhost /dev/nbd0 -N blocks
Negotiation: ..size = 64MB
bs=1024, sz=67108864 bytes
# # Read the data and validate the hash
# dd if=/dev/nbd0 bs=4096 | md5sum
16384+0 records in
16384+0 records out
67108864 bytes (67 MB) copied, 0.265507 s, 253 MB/s
7604d00d72b9b8f8cb10e709a1ac3075  -
# # Disconnect /dev/nbd0
# nbd-client -d /dev/nbd0
Disconnecting: que, disconnect, sock, done
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Nbd maintained by <a href="https://github.com/NicolasT">NicolasT</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
